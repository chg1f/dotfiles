#!/bin/zsh
# shellcheck shell=bash source=/dev/null disable=SC2034

export PATH="$HOME/.local/bin:/usr/bin:/bin:/usr/sbin:/sbin"
# export LANG="en_US.UTF-8"
# export LC_ALL="en_US.UTF-8"
# export TERM="xterm-256color"

typeset -gU path
path=(
	"/usr/local/bin"
	"/usr/bin"
	"/bin"
	"/usr/local/sbin"
	"/usr/sbin"
	"/sbin"
)
if ! (( ${+commands[brew]} )); then
	local prefix
	for prefix in "/opt/homebrew" "/home/linuxbrew/.linuxbrew"; do
		if [[ -x "${prefix}/bin/brew" ]]; then
			eval "$(${prefix}/bin/brew shellenv)"

			break
		fi
	done
fi

export ZIM_HOME="$XDG_DATA_HOME/zim"
export ZIM_CONFIG_FILE="$ZDOTDIR/.zimrc"
[[ -s "$HOMEBREW_PREFIX/opt/zimfw/share/zimfw.zsh" ]] && \
	source "$HOMEBREW_PREFIX/opt/zimfw/share/zimfw.zsh" init -q
[[ -s "$ZIM_HOME/init.zsh" ]] && \
	source "$ZIM_HOME/init.zsh"

path[1,0]="$HOME/.local/bin"




export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"
export HISTFILE="$XDG_STATE_HOME/zsh/history"
if (( ${+commands[nvim]} )); then
	export EDITOR="${+commands[nvim]}"
	export VISUAL="${+commands[nvim]}"
elif (( ${+commands[vim]} )); then
	export EDITOR="vim"
	export VISUAL="vim"
elif (( ${+commands[vi]} )); then
	export EDITOR="vi"
	export VISUAL="vi"
fi
export MANPAGER="col -bx | bat -p -l man"
export LESS="-g -i -w -M -R -F -X"
export LESSHISTFILE="$XDG_STATE_HOME/lesshst"
export HOMEBREW_BUNDLE_FILE="$XDG_CONFIG_HOME/homebrew/Brewfile"
export HOMEBREW_NO_AUTO_UPDATE=1
export HOMEBREW_NO_ENV_HINTS=1
export HOMEBREW_NO_INSTALL_FROM_API=1
export DIRENV_LOG_FORMAT=$'\E[2mdirenv: %s\E[0m'
export TMUX_PLUGIN_MANAGER_PATH="$XDG_DATA_HOME/tmux/plugins"
export GOPATH="$XDG_DATA_HOME/go"

# utils=$(fd -L gnubin $(brew --prefix)/opt/)
# for formula in "coreutils" "findutils"; do
# 	if [[ -d "$HOMEBREW_PREFIX/opt/$formula/libexec/gnubin" ]] && [[ -d "$HOMEBREW_PREFIX/opt/$formula/libexec/gnuman" ]]; then
# 		path[1,0]="$HOMEBREW_PREFIX/opt/$formula/libexec/gnubin"
# 		manpath[1,0]="$HOMEBREW_PREFIX/opt/$formula/libexec/gnuman"
# 	fi
# done

# Set editor default keymap to vi (`-v`)
bindkey -v
zmodload -F zsh/terminfo +p:terminfo
bindkey -M vicmd 'k' history-substring-search-up
bindkey -M vicmd 'j' history-substring-search-down
autoload -Uz edit-command-line
zle -N edit-command-line
bindkey -M vicmd 'v' edit-command-line

alias PX="HTTP_PROXY=http://127.0.0.1:7890 HTTPS_PROXY=http://127.0.0.1:7890 SOCKS_PROXY=socks5://127.0.0.1:7890 ALL_PROXY=socks5://127.0.0.1:7890"
alias NLH="LEFTHOOK=0"
alias http="http --check-status -pHBhbm"

# vim: set ft=zsh
